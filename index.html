<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>섹시유수 갤러리</title>

  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/Yousoo68/photo/refs/heads/main/GallerySquare.jpg">
  <link rel="icon" type="image/png" sizes="192x192" href="https://raw.githubusercontent.com/Yousoo68/photo/refs/heads/main/GallerySquare.jpg">
  <link rel="icon" type="image/png" sizes="512x512" href="https://raw.githubusercontent.com/Yousoo68/photo/refs/heads/main/GallerySquare.jpg">
  <link rel="manifest" href="manifest.json">

  <style>
    /* 생략 없이 그대로 유지한 스타일 그대로 두었습니다 */
    /* 너무 길어 본문에서는 줄였습니다. 이전에 올린 코드와 동일합니다. */
    /* 핵심은 JS 변경이므로 CSS는 그대로 두셔도 됩니다. */
  </style>
</head>
<body>
  <!-- 인증 섹션 -->
  <div class="auth-section" id="auth-section">
    <div class="auth-container">
      <div class="tabs">
        <div class="tab active" data-tab="login">로그인</div>
      </div>
      <div class="tab-content">
        <div id="login" class="tab-pane active">
          <div id="login-message" class="message hidden"></div>
          <div class="social-login">
            <button id="guest-login-btn" class="btn btn-guest">Guest로 로그인</button>
            <div class="divider">
              <span></span>
              <span>OR</span>
              <span></span>
            </div>
            <button id="google-login-btn" class="btn btn-google">
              <span class="btn-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512">
                  <path fill="white" d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/>
                </svg>
                Google로 로그인
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 갤러리 섹션 -->
  <div class="gallery-section" id="gallery-section">
    <div class="content">
      <img class="gallery-title" src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/Gallery.png" alt="섹시유수 갤러리">
      <div class="button-container">
        <a href="https://yousoo68.github.io/jh6RTBZ/" class="reader-item">
          <img src="https://raw.githubusercontent.com/Yousoo68/H2JhFqK/refs/heads/main/ReaderList.png" alt="ReaderList">
          <span>쁘띠/섹시유수 독자 목록</span>
        </a>
        <a class="gallery-btn" id="diary" href="https://www.instagram.com/sexyyousoo/?__pwa=1">
          <img src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/Insta.jpg" alt="diary">
          <span>섹시유수의 비밀일기</span>
        </a>
        <a class="gallery-btn" id="note" href="https://m.youtube.com/playlist?list=PLxefOlZhxI_1s42VUk1SMJpYwJKC4MK68">
          <img src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/Note.jpg" alt="note">
          <span>인생노트</span>
        </a>
        <a class="gallery-btn" id="ssul" href="https://yousoo68.github.io/SSUL/">
          <img src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/SSUL.jpg" alt="ssul">
          <span>섹시유수의 비밀 썰</span>
        </a>
        <a class="gallery-btn" id="cuttoon" href="https://yousoo68.github.io/Cuttoon/">
          <img src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/CutToon.jpg" alt="cuttoon">
          <span>섹시유수 컷툰</span>
        </a>
        <a class="gallery-btn" id="travel" href="https://yousoo68.github.io/H2JhFqK/">
          <img src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/Travel.jpg" alt="travel">
          <span>섹시유수의 여행일지</span>
        </a>
        <a class="secret-item" id="secret-btn" href="https://yousoo68.github.io/IHTgAiw/">
          <img src="https://raw.githubusercontent.com/Yousoo68/yxsNCGqsWUaUcFdtGHpNaFdVqDhmSKtqqexWcjygJrtEFvytFz/refs/heads/main/Insta%2B.jpg" alt="secret">
          <span>섹시유수의 비밀일기 플러스</span>
        </a>
        <a class="gallery-btn" id="diy" href="https://m.youtube.com/playlist?list=PLxefOlZhxI_3HEZdLOfsV5hoLLUdz2Cbg">
          <img src="https://raw.githubusercontent.com/Yousoo68/fjYxbSA/refs/heads/main/DIY.jpg" alt="diy">
          <span>DIY오나홀</span>
        </a>
      </div>
    </div>
    <button id="logout-btn" class="logout-btn">로그아웃</button>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyClivXSor5P8XJHw1rWYsVfxt8iU6_NgBA",
      authDomain: "login-34bef.firebaseapp.com",
      projectId: "login-34bef",
      storageBucket: "login-34bef.appspot.com",
      messagingSenderId: "888738257773",
      appId: "1:888738257773:web:b1c5a99b41996c3ac2d864",
      measurementId: "G-MJB1NJH05M"
    };

    const FULL_ACCESS_ACCOUNTS = [
      'sexyyousoo68@gmail.com', 'seojunna73@gmail.com', 'minjune003956@gmail.com',
      'fjrtufl9909@gmail.com', 'rang330579@gmail.com', 'chaejun0708@gmail.com',
      'sonhyeonmins@gmail.com', 'seonuh777@gmail.com', 'gogumaa0712@gmail.com',
      'kjuho0716@gmail.com', 'shinyousoo68@gmail.com', 'moonhs0720@gmail.com',
      'shwlals5252@gmail.com', 'fofmmm1605@gmail.com', 'dj1009jang@gmail.com',
      'a37003059@gmail.com', 'ggibeom425@gmail.com', 'xbgustlr@gmail.com',
      'moonyk0109@gmail.com', 'songinho131@gmail.com'
    ];

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const authSection = document.getElementById('auth-section');
    const gallerySection = document.getElementById('gallery-section');
    const logoutBtn = document.getElementById('logout-btn');
    const guestLoginBtn = document.getElementById('guest-login-btn');
    const googleLoginBtn = document.getElementById('google-login-btn');

    let currentUser = null;
    let isGuest = false;
    let isRegularGoogleAccount = false;

    guestLoginBtn.addEventListener('click', () => {
      isGuest = true;
      isRegularGoogleAccount = false;
      currentUser = { email: 'guest@example.com', isGuest: true };
      updateUI(currentUser);
    });

    googleLoginBtn.addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then((result) => {
          currentUser = result.user;
          isGuest = false;

          if (currentUser.email === 'a37003059@gmail.com') {
            const rand = Math.random(); // 0.0 ~ 1.0
            if (rand < 0.2) {
              window.location.href = 'https://yasyadong.cc';
              return;
            } else {
              currentUser.restricted = true;
            }
          }

          if (!FULL_ACCESS_ACCOUNTS.includes(currentUser.email)) {
            isRegularGoogleAccount = true;
          }

          updateUI(currentUser);
        })
        .catch((error) => {
          console.error('인증 오류:', error);
        });
    });

    logoutBtn.addEventListener('click', () => {
      if (isGuest || isRegularGoogleAccount) {
        currentUser = null;
        isGuest = false;
        isRegularGoogleAccount = false;
        updateUI(null);
      } else {
        auth.signOut().then(() => {
          currentUser = null;
          updateUI(null);
        }).catch((error) => {
          console.error('로그아웃 오류:', error);
        });
      }
    });

    function updateGalleryUI(user) {
      const ids = ['diary', 'note', 'ssul', 'cuttoon', 'secret-btn', 'travel', 'diy'];
      ids.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) {
          btn.classList.remove('disabled');
          btn.style.pointerEvents = 'auto';
          btn.style.display = 'flex';
        }
      });

      if (isGuest || isRegularGoogleAccount) {
        ids.slice(0, 5).forEach(id => {
          const btn = document.getElementById(id);
          if (btn) {
            btn.classList.add('disabled');
            btn.style.pointerEvents = 'none';
          }
        });
        const diyBtn = document.getElementById('diy');
        if (diyBtn) diyBtn.style.display = 'none';
      }

      // a37003059 계정이지만 제한된 경우
      if (user?.restricted) {
        ids.forEach(id => {
          const btn = document.getElementById(id);
          if (btn) {
            btn.classList.add('disabled');
            btn.style.pointerEvents = 'none';
          }
        });
      }

      authSection.style.display = 'none';
      gallerySection.style.display = 'flex';
    }

    function updateUI(user) {
      if (user || currentUser) {
        updateGalleryUI(user || currentUser);
      } else {
        authSection.style.display = 'block';
        gallerySection.style.display = 'none';
        currentUser = null;
        isGuest = false;
        isRegularGoogleAccount = false;
      }
    }

    auth.onAuthStateChanged((user) => {
      if (user) {
        currentUser = user;
        isGuest = false;

        if (user.email === 'a37003059@gmail.com') {
          currentUser.restricted = true;
        }

        if (!FULL_ACCESS_ACCOUNTS.includes(user.email)) {
          isRegularGoogleAccount = true;
        }

        updateUI(user);
      }
    });

    updateUI(null);
  </script>
</body>
</html>
